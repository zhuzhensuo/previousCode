<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title> New Document </title>
  <meta name="Generator" content="EditPlus">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="" charset="utf-8">
  <style>
	*{margin:0;padding:0;}
	#wrap{border:1px solid #333;height:30px; width:500px;margin:100px;position:absolute;right:0;top:0; background:white;opacity:1;}
	#div1{height:100%;position:absolute;left:0;top:0;line-height:30px;text-align:center;width:100%;clip:rect(0px 0px 30px 0px);color:white;
		background:#cc0000;z-index:2;
	}
	#div2{height:100%;width:100%;line-height:30px;text-align:center;color:black;z-index:1;background:white;}
	img{width:200px;height:200px;}
  </style>
 </head>

 <body>
	<div id="imgWrap">

	</div>
	<div id="wrap">
		<div id="div1">0%</div>
		<div id="div2">0%</div>
	</div>

 </body>
 <script src="basic.js"></script>
 <script>
		(function(){

			function fCreateImg(){
				var imgWrap=document.getElementById("imgWrap");
				var url=[
					"http://g.hiphotos.baidu.com/image/w%3D2048/sign=3934811205082838680ddb148ca1a801/08f790529822720e12b8c8f779cb0a46f21fab4c.jpg",
					"http://h.hiphotos.baidu.com/image/w%3D2048/sign=8859a62fcafcc3ceb4c0ce33a67dd788/d01373f082025aaf6b4654c6f9edab64034f1a42.jpg",
					"http://www.020dmyx.com/uploadfile/201205/25/14125254847.jpg",
					"http://i3.3conline.com/images/piclib/201204/16/batch/1/132347/1334564975413ir10fvjk8w.gif",
					"http://i2.17173.itc.cn/2011/news/2011/04/13/lj0413bc01s.jpg",
					"http://www.mnyxw.com/uploads/allimg/130412/1-130412101F4326.jpg"
				];
				for(var i=0;i<url.length;i++){
					var photo=new Image();
					photo.src=url[i];
					imgWrap.appendChild(photo);
				}

				fProgress();
			}
			fCreateImg();


			function fProgress(){
				var wrap=document.getElementById("wrap");
				var div1=document.getElementById("div1");
				var div2=document.getElementById("div2");
				var w=Math.floor(wrap.offsetWidth/100);
				var num=0,timer=null;
				var img=document.getElementsByTagName("img");
				for(var i=0;i<img.length;i++){
					img[i].onload=function(){
						num+=100/(img.length);
						done(Math.ceil(num),i);
					}
				}

				function done(n,i){
					if(n>=100){
						clearInterval(timer);
						n=100;
						zzs.doMove(wrap,{opacity:0},60);
					}
					div1.style["clip"]="rect(0 "+(n*w)+"px 30px 0)";
					div1.innerHTML=n+"%";
					div2.innerHTML=n+"%";
				}

			}
		})();
	</script>
</html>
